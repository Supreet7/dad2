<%#
Copyright 2008-2013 Concur Technologies, Inc.

Licensed under the Apache License, Version 2.0 (the "License"); you may
not use this file except in compliance with the License. You may obtain
a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations
under the License.
%>
<% language_tabs = current_page.data.language_tabs || [] %>
<% page_content = yield %>
<%
  if current_page.data.includes
    current_page.data.includes.each do |include|
      page_content += partial("includes/#{include}")
    end
  end
%>

<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title><%= current_page.data.title || "DOL API Documentation" %></title>

    <style>
      <%= Rouge::Themes::MonokaiSublime.render(:scope => '.highlight') %>
    </style>
    <%= stylesheet_link_tag :screen, media: :screen %>
    <%= stylesheet_link_tag :print, media: :print %>
    <% if current_page.data.search %>
      <%= javascript_include_tag  "all" %>
    <% else %>
      <%= javascript_include_tag  "all_nosearch" %>
    <% end %>
    <!-- css begin -->
    <link rel="stylesheet" href="/css/foundation.css" />
    <link rel="stylesheet" href="/css/dol-style.css" />
    <link rel="stylesheet" href="/css/content.css" />
    <link rel="stylesheet" href="/css/mobile.css" />
    <link rel="stylesheet" href="/css/developer.css" />

    <link href='http://fonts.googleapis.com/css?family=Open+Sans:700,300' rel='stylesheet' type='text/css'>
  <!-- css End -->

  <!-- Scripts begin -->
      <script id="_fed_an_ua_tag" src="/js/federated-analytics-developer.js?agency=DOL&amp;subagency=DEVELOPER"></script>
      <script src="/js/modernizr.js"></script>
      <script src="/js/safari_pushwoosh.js"></script>
      <script src="/js/developer_scripts.js"></script>
      <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.2/html5shiv.js"></script>
      <script src="//s3.amazonaws.com/nwapi/nwmatcher/nwmatcher-1.2.5-min.js"></script>
      <script src="//html5base.googlecode.com/svn-history/r38/trunk/js/selectivizr-1.0.3b.js"></script>
      <script src="//cdnjs.cloudflare.com/ajax/libs/respond.js/1.1.0/respond.min.js"></script>
      <![endif]-->

      <script type="text/javascript">
          //<![CDATA[
          var usasearch_config = { siteHandle:"developer.dol.gov" };
          var script = document.createElement("script");
          script.type = "text/javascript";
          script.src = "//search.usa.gov/javascripts/remote.loader.js";
          document.getElementsByTagName("head")[0].appendChild(script);
          //]]>
      </script>
  <!-- Scripts End -->

  </head>

  <body class="<%= page_classes %>" data-languages="<%=h language_tabs.map{ |lang| lang.is_a?(Hash) ? lang.keys.first : lang }.to_json %>">
<!-- BEGIN DOL HEADER -->
  <header class="site-header">
    <div class="wrapper">
      <!--Start Banner -->
      <a id="top"></a>
      <div class="row top-header" role="banner">
        <div class="large-6 columns"> <a href="/"> <span class="show-for-medium-up brand"></span>
          <h1 class="header-logo-type">DEVELOPER PORTAL<br/>
          UNITED STATES DEPARTMENT OF LABOR</h1>
          </a>
        </div>
        <div class="large-2 columns">
          <div class="social-block right hide-for-small">
            <a href="http://www.facebook.com/departmentoflabor"  class="sm-facebook">Facebook</a>
            <a href="https://twitter.com/usdol" class="sm-twitter">Twitter</a>
            <a href="https://www.instagram.com/USDOL/" class="sm-instagram">DOL Instagram</a>
            <a href="https://www.dol.gov/rss" class="sm-rss">RSS</a>
            <a href="javascript:window.open('https://public.govdelivery.com/accounts/USDOL/subscriber/new','Popup','width=800,height=500,toolbar=no,scrollbars=yes,resizable=yes'); void('');"
            ONCLICK="window.status='Subscribe'; return true"
            ONMOUSEOVER="window.status='Subscribe'; return true"
            ONMOUSEOUT="window.status=''; return true" class="sm-email">Email</a>
          </div>
        </div>
        <div class="large-4 columns">
          <div id="searchbox" class="hide-for-small-only">
          <!--<form accept-charset="UTF-8" action="http://search.usa.gov/search" id="search_form" method="get">
          <div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;"/></div>
          <div class="small-10 columns">
          <input id="affiliate" name="affiliate" type="hidden" value="developer.dol.gov"/>
          <label for="query">Enter Search Term(s):</label>
          <input autocomplete="off" class="usagov-search-autocomplete" id="query" name="query" type="text"/>
          </div>
          <div class="small-2 columns"><input name="commit" type="submit" value="Search"/>
          </div>
          </form></-->
            <form action="//search.usa.gov/search" method="get" class="usagov" role="search">
              <div class="small-10 columns">
                <label for="query"><span class="hide">Search</span></label>
                <input autocomplete="off" type="text" id="query" name="query" placeholder="Enter Search Terms" class="usagov-search-autocomplete" required="required" >
              </div>
              <div class="small-2 columns">
                <input id="affiliate" name="affiliate" type="hidden" value="developer.dol.gov"/>
                <input type="image"  src="/img/icon-search.png" alt="Search" class="usagov-submit">
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </header>
<!-- End DOL HEADER -->
    <a href="#" id="nav-button">
      <span>
        NAV
        <%= image_tag('navbar.png') %>
      </span>
    </a>
    <div class="toc-wrapper">
      <% if language_tabs.any? %>
        <div class="lang-selector">
          <% language_tabs.each do |lang| %>
            <% if lang.is_a? Hash %>
              <a href="#" data-language-name="<%= lang.keys.first %>"><%= lang.values.first %></a>
            <% else %>
              <a href="#" data-language-name="<%= lang %>"><%= lang %></a>
            <% end %>
          <% end %>
        </div>
      <% end %>
      <% if current_page.data.search %>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <% end %>
      <div id="toc" class="toc-list-h1">
        <% toc_data(page_content).each do |h1| %>
          <li>
            <a href="#<%= h1[:id] %>" class="toc-h1 toc-link" data-title="<%= h1[:content] %>"><%= h1[:content] %></a>
            <% if h1[:children].length > 0 %>
              <ul class="toc-list-h2">
                <% h1[:children].each do |h2| %>
                  <li>
                    <a href="#<%= h2[:id] %>" class="toc-h2 toc-link" data-title="<%= h2[:content] %>"><%= h2[:content] %></a>
                    <% if h2[:children].length > 0 %>
                      <ul class="toc-list-h3">
                        <% h2[:children].each do |h3| %>
                          <li>
                            <a href="#<%= h3[:id] %>" class="toc-h3 toc-link" data-title="<%= h1[:content] %>"><%= h3[:content] %></a>
                          </li>
                        <% end %>
                      </ul>
                    <% end %>
                  </li>
                <% end %>
              </ul>
            <% end %>
          </li>
        <% end %>
      </div>
      <% if current_page.data.toc_footers %>
        <ul class="toc-footer">
          <% current_page.data.toc_footers.each do |footer| %>
            <li><%= footer %></li>
          <% end %>
        </ul>
      <% end %>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <%= page_content %>
      </div>
      <div class="dark-box">
        <% if language_tabs.any? %>
          <div class="lang-selector">
            <% language_tabs.each do |lang| %>
              <% if lang.is_a? Hash %>
                <a href="#" data-language-name="<%= lang.keys.first %>"><%= lang.values.first %></a>
              <% else %>
                <a href="#" data-language-name="<%= lang %>"><%= lang %></a>
              <% end %>
            <% end %>
          </div>
        <% end %>
      </div>
    </div>
  </body>
</html>
